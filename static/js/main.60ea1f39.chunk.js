(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{89:function(e,t,n){},91:function(e,t,n){"use strict";n.r(t);var r=n(10),c=n.n(r),a=n(17),s=n(0),i=n.n(s),o=n(122),u=n(124),l=n(125),d=n(126),j=n(119),b=Object(j.a)((function(e){return{header:{background:"rgb(0,0,0)"},link:{color:"#fff",fontSize:20,marginRight:20}}})),f=n(2),O=function(){var e=b();return Object(f.jsx)(o.a,{position:"fixed",className:e.header,children:Object(f.jsx)(u.a,{fixed:!0,children:Object(f.jsxs)(l.a,{children:[Object(f.jsx)(d.a,{className:e.link,color:"inherit",href:"/",children:"News"}),Object(f.jsx)(d.a,{className:e.link,color:"inherit",href:"/admin",children:"Admin"})]})})})},p=n(12),h=n(130),m=n(131),w=n(136),x=n(132),g=n(43),y=Object(j.a)((function(e){return{buttons:{display:"block"},button:{width:100,margin:"10px 10px 0 0"},avatar:{width:150,height:150,marginRight:20,cursor:"pointer"},header:{fontSize:"30px",lineHeight:"30px",marginBottom:10},subheader:{color:"#e91e63"},item:{marginBottom:30,borderBottom:"2px solid #e91e63"}}})),v=n(14),E=function(e){return{type:"ERROR",payload:e}},N=function(e){return{type:"LOADED_NEWS",payload:e}},L=function(e){return{type:"LOADED_ALL_COMMENTS",payload:e}},C=function(e){return{type:"LOADED_USERS",payload:e}},I=function(e,t){return function(){var n=JSON.parse(localStorage.getItem("news-store"));null===n?(t({type:"REQUESTED"}),e.getUsers().then((function(e){return t(C(e))})).catch((function(e){return t(E(e))})),e.getComments().then((function(e){return t(L(e))})).catch((function(e){return t(E(e))})),e.getNews().then((function(e){return t(N(e))})).catch((function(e){return t(E(e))}))):(t(L(n.newsList.allComments)),t(C(n.newsList.users)),t(N(n.newsList.news)))}},S=n(129),T=Object(j.a)((function(){return{buttons:{display:"flex",width:170,justifyContent:"space-between",marginTop:20}}})),_=n(22),A=n(135),D=n(134),R=Object(j.a)((function(e){return{paper:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)},title:{width:"100%"},body:{marginTop:10,maxWidth:"100%",minWidth:"100%"},buttonSubmit:{marginTop:20,width:"100%"}}})),k=Object(a.b)((function(e){return{changedItem:e.newsList.changedItem}}),(function(e){return{itemChange:function(t){return e({type:"CHANGE_ITEM",payload:t})},titleChange:function(t){return e(function(e){return{type:"TITLE_CHANGE",payload:e}}(t))},bodyChange:function(t){return e(function(e){return{type:"BODY_CHANGE",payload:e}}(t))},saveChange:function(t){return e(function(e){return{type:"SAVE_CHANGE",payload:e}}(t))}}}))((function(e){var t=e.news,n=e.changedItem,r=e.itemChange,c=e.titleChange,a=e.bodyChange,i=e.saveChange,o=R(),u=Object(s.useState)(!1),l=Object(_.a)(u,2),d=l[0],j=l[1];var b=n?Object(f.jsx)(A.a,{open:d,onClose:function(){return j(!1)},children:Object(f.jsxs)("div",{className:o.paper,children:[Object(f.jsx)(D.a,{label:"Title",color:"secondary",value:n.title,className:o.title,onChange:function(e){return c(e.target.value)}}),Object(f.jsx)(D.a,{placeholder:"Body",value:n.body,className:o.body,onChange:function(e){return a(e.target.value)}}),Object(f.jsx)(S.a,{color:"secondary",variant:"contained",className:o.buttonSubmit,onClick:function(){i(n),j(!1)},children:"Edit"})]})}):null;return Object(f.jsxs)("div",{children:[Object(f.jsx)(S.a,{color:"secondary",variant:"outlined",onClick:function(){j(!0),r(t)},children:"Edit"}),b]})})),B=Object(a.b)(null,(function(e){return{onDelete:function(t){return e(function(e){return{type:"NEWS_REMOVED_FROM_CART",payload:e}}(t))}}}))((function(e){var t=e.news,n=e.onDelete,r=T();return Object(f.jsxs)("div",{className:r.buttons,children:[Object(f.jsx)(k,{news:t}),Object(f.jsx)(S.a,{color:"secondary",variant:"outlined",onClick:function(){return n(t.id)},children:"Delete"})]})})),H=Object(p.f)((function(e){var t=e.news,n=e.admin,r=e.history,c=y(),a=t.title,s=t.body,i=t.id,o=t.user;return Object(f.jsxs)(h.a,{className:c.item,children:[Object(f.jsx)(m.a,{onClick:function(){return r.push("/"+i)},children:Object(f.jsx)(w.a,{className:c.avatar,alt:"Remy Sharp",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT2z1rdNWafwr29UyOrydlSPg4Et4RR4-z5iA&usqp=CAU"})}),Object(f.jsxs)(x.a,{children:[Object(f.jsxs)(g.a,{className:c.header,component:"h2",children:[a," "]}),Object(f.jsxs)(g.a,{className:c.subheader,component:"h3",children:["wrote  ",o?o.name:"Admin"]}),Object(f.jsx)(g.a,{component:"span",children:s}),n?Object(f.jsx)(B,{news:t}):null]})]})})),W=n(128),G=n(6),M=i.a.createContext(),F=M.Provider,U=M.Consumer,z=function(){return function(e){return function(t){return Object(f.jsx)(U,{children:function(n){return Object(f.jsx)(e,Object(G.a)(Object(G.a)({},t),{},{service:n}))}})}}},J=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduceRight((function(e,t){return t(e)}),e)}},Y=n(133),V=Object(j.a)((function(e){return{spinner:{color:"#fff",display:"flex",justifyContent:"center",height:"1080px"}}})),q=function(){var e=V();return Object(f.jsx)("div",{className:e.spinner,children:Object(f.jsx)(Y.a,{color:"inherit",size:100})})},Q=(n(89),function(){return Object(f.jsx)("div",{children:"Error!"})}),P=function(e){var t=e.news,n=e.admin;return Object(f.jsx)(u.a,{children:Object(f.jsx)(W.a,{style:{marginTop:"60px"},children:t.map((function(e){return Object(f.jsx)(H,{news:e,admin:n},e.id)}))})})},K=J(z(),Object(a.b)((function(e){var t=e.newsList,n=t.filteredNews;return{news:t.news,loading:t.loading,error:t.error,filteredNews:n}}),(function(e,t){var n=t.service;return{fetchNews:I(n,e)}})))((function(e){var t=e.news,n=e.loading,r=e.error,c=e.fetchNews,a=e.admin,i=e.filteredNews;return Object(s.useEffect)((function(){c()}),[c]),n?Object(f.jsx)("div",{style:{paddingTop:110},children:Object(f.jsx)(q,{})}):r?Object(f.jsx)(Q,{}):i?Object(f.jsx)(P,{admin:a,news:i}):Object(f.jsx)(P,{admin:a,news:t})})),X=function(){return Object(f.jsx)(K,{})},Z=Object(j.a)((function(){return{buttons:{display:"flex",justifyContent:"space-around",width:700,margin:"0 auto"},fields:{width:450,margin:"20px auto"},filter:{margin:"10px 10px 10px 10px",width:"200px",fontSize:"30px"}}})),$=n(127),ee=Object(a.b)((function(e){return{newItem:e.newsList.newItem}}),(function(e){return{newTitleChange:function(t){return e({type:"NEW_TITLE_CHANGE",payload:t.target.value})},newBodyChange:function(t){return e({type:"NEW_BODY_CHANGE",payload:t.target.value})},onAddNewItem:function(t){return e(function(e){return{type:"ADD_NEW_ITEM",payload:e}}(t))}}}))((function(e){var t=e.newTitleChange,n=e.newBodyChange,r=e.newItem,c=e.onAddNewItem,a=R(),i=Object(s.useState)(!1),o=Object(_.a)(i,2),u=o[0],l=o[1];return Object(f.jsxs)("div",{children:[Object(f.jsx)(S.a,{color:"secondary",variant:"contained",onClick:function(){return l(!0)},children:"Add news"}),Object(f.jsx)(A.a,{open:u,onClose:function(){return l(!1)},children:Object(f.jsxs)("div",{className:a.paper,children:[Object(f.jsx)(D.a,{label:"Title",color:"secondary",className:a.title,onChange:function(e){return t(e)}}),Object(f.jsx)($.a,{placeholder:"Body",minRows:5,className:a.body,onChange:function(e){return n(e)}}),Object(f.jsx)(S.a,{color:"secondary",variant:"contained",className:a.buttonSubmit,onClick:function(){l(!1),c(r)},children:"Edit"})]})})]})})),te=Object(a.b)(null,(function(e){return{filter:function(t,n){return e(function(e,t){return{type:"FILTER",payload:{type:e,value:t}}}(t,n))},resetFilter:function(){return e({type:"RESET_FILTER"})}}}))((function(e){var t=e.resetFilter,n=e.filter,r=Z();return Object(f.jsxs)(u.a,{style:{marginTop:"100px"},children:[Object(f.jsxs)("div",{className:r.buttons,children:[Object(f.jsx)(ee,{}),Object(f.jsx)(S.a,{color:"secondary",variant:"contained",onClick:function(){return n("comments")},children:"Top by comments"}),Object(f.jsx)(S.a,{color:"secondary",variant:"contained",onClick:function(){return n("views")},children:"Top by views"}),Object(f.jsx)(S.a,{color:"secondary",variant:"contained",onClick:function(){return t()},children:"Reset filter"})]}),Object(f.jsxs)("div",{className:r.fields,children:[Object(f.jsx)(D.a,{label:"Filter by user Id",color:"secondary",className:r.filter,onChange:function(e){return n("userId",e.target.value)}}),Object(f.jsx)(D.a,{label:"Filter by recent news",color:"secondary",className:r.filter,onChange:function(e){return n("resent",e.target.value)}})]})]})})),ne=Object(p.f)((function(){return Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsx)(te,{}),Object(f.jsx)(K,{admin:!0})]})})),re=Object(j.a)((function(){return{name:{fontSize:"16px",textTransform:"uppercase"},body:{fontSize:"12px"},img:{width:80,height:80,marginRight:20},email:{fontSize:"12px",color:"#e91e63",marginTop:10,textTransform:"uppercase"}}})),ce=J(z(),Object(a.b)((function(e){var t=e.newsList,n=t.comments;return{newsById:t.newsById,loading:t.loading,error:t.error,comments:n}}),(function(e,t){var n=t.service;return{fetchNewsById:function(t){return function(e,t){return function(n){var r=JSON.parse(localStorage.getItem("views"));r?localStorage.setItem("views",JSON.stringify([].concat(Object(v.a)(r),[n]))):localStorage.setItem("views",JSON.stringify([n])),t({type:"REQUESTED"}),t({type:"LOADED_NEWS_BY_ID",payload:n}),e.getComments().then((function(e){var r=e.filter((function(e){return e.postId==n}));t(function(e){return{type:"LOADED_COMENTS",payload:e}}(r))}))}}(n,e)(t)}}})))((function(e){var t=e.itemId,n=e.comments,r=e.newsById,c=e.loading,a=e.error,i=e.fetchNewsById,o=re();return Object(s.useEffect)((function(){i(t)}),[i,t]),c?Object(f.jsx)("div",{style:{paddingTop:110},children:Object(f.jsx)(q,{})}):a?Object(f.jsx)(Q,{}):r&&n?Object(f.jsxs)(u.a,{style:{marginTop:"100px"},children:[Object(f.jsx)(H,{news:r}),Object(f.jsx)(W.a,{style:{marginTop:"50px"},children:n.map((function(e){return Object(f.jsxs)(h.a,{children:[Object(f.jsx)(m.a,{children:Object(f.jsx)(w.a,{className:o.img,alt:"Remy Sharp",src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSymjxHoVB2hlH41ioYDjkzOd7oVPhJu-uIeQ&usqp=CAU"})}),Object(f.jsxs)(x.a,{children:[Object(f.jsx)(g.a,{className:o.email,component:"h3",children:e.email}),Object(f.jsx)(g.a,{className:o.name,component:"h2",children:e.name}),Object(f.jsx)(g.a,{className:o.body,component:"span",children:e.body})]})]},e.id)}))})]}):null})),ae=function(){return Object(f.jsxs)(i.a.Fragment,{children:[Object(f.jsx)(O,{}),Object(f.jsxs)(p.c,{children:[Object(f.jsx)(p.a,{path:"/",exact:!0,component:X}),Object(f.jsx)(p.a,{path:"/admin",exact:!0,component:ne}),Object(f.jsx)(p.a,{path:"/:id",render:function(e){var t=e.match.params.id;return Object(f.jsx)(ce,{itemId:t})}})]})]})},se=n(34),ie=n(28),oe=n(64),ue=n(63),le=function(e){Object(oe.a)(n,e);var t=Object(ue.a)(n);function n(){var e;Object(se.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(e=t.call.apply(t,[this].concat(c))).state={hasError:!1},e}return Object(ie.a)(n,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(f.jsx)(Q,{}):this.props.children}}]),n}(s.Component),de=le,je=n(40),be=n(21),fe=n.n(be),Oe=n(38),pe=n(62),he=function(e){if(e)return e[0].toUpperCase()+e.substring(1).toLowerCase()},me=function(e,t){var n=t.type,r=t.payload;if(void 0===e)return{news:[],loading:!0,error:null,newItem:{}};switch(n){case"REQUESTED":return Object(G.a)(Object(G.a)({},e.newsList),{},{loading:!0,error:null});case"ERROR":return Object(G.a)(Object(G.a)({},e.newsList),{},{loading:!1,error:r});case"LOADED_USERS":return Object(G.a)(Object(G.a)({},e.newsList),{},{users:r,loading:!1,error:null});case"LOADED_NEWS":var c=r.map((function(t){var n=e.newsList.users.find((function(e){return e.id===t.userId}));return Object(G.a)(Object(G.a)({},t),{},{title:he(t.title),body:he(t.body),user:n})}));return Object(G.a)(Object(G.a)({},e.newsList),{},{news:c.sort((function(e,t){return e.id-t.id})),loading:!1,error:null});case"LOADED_ALL_COMMENTS":return Object(G.a)(Object(G.a)({},e.newsList),{},{allComments:r,loading:!1,error:null});case"LOADED_NEWS_BY_ID":var a=e.newsList.news.find((function(e){return e.id==r}));return Object(G.a)(Object(G.a)({},e.newsList),{},{newsById:a,loading:!1,error:null});case"LOADED_COMENTS":return Object(G.a)(Object(G.a)({},e.newsList),{},{comments:r,loading:!1,error:null});case"NEWS_REMOVED_FROM_CART":var s=e.newsList.news.findIndex((function(e){return e.id===r}));return Object(G.a)(Object(G.a)({},e.newsList),{},{news:[].concat(Object(v.a)(e.newsList.news.slice(0,s)),Object(v.a)(e.newsList.news.slice(s+1)))});case"NEW_TITLE_CHANGE":return Object(G.a)(Object(G.a)({},e.newsList),{},{newItem:Object(G.a)(Object(G.a)({},e.newsList.newItem),{},{title:r})});case"NEW_BODY_CHANGE":return Object(G.a)(Object(G.a)({},e.newsList),{},{newItem:Object(G.a)(Object(G.a)({},e.newsList.newItem),{},{body:r})});case"ADD_NEW_ITEM":var i={id:Date.now(),userId:333,title:r.title,body:r.body};return Object(G.a)(Object(G.a)({},e.newsList),{},{news:[].concat(Object(v.a)(e.newsList.news),[i])});case"FILTER":var o=[];if("comments"===r.type){var u=e.newsList.news.map((function(t){return Object(G.a)(Object(G.a)({},t),{},{comments:e.newsList.allComments.filter((function(e){return e.postId==t.id})).length})}));o=u.sort((function(e,t){return e.comments-t.comments}))}if("userId"===r.type&&(o=e.newsList.news.filter((function(e){return e.userId==r.value}))),"resent"===r.type){var l=e.newsList.news.sort((function(e,t){return t.id-e.id}));o=l.slice(0,r.value)}return"views"===r.type&&function(){for(var t,n=JSON.parse(localStorage.getItem("views")),r=[],c=function(t){var c=e.newsList.news.filter((function(e){return e.id==n[t]}));r.push.apply(r,Object(v.a)(c))},a=0;a<n.length;a++)c(a);o=r.filter((t=new Set,function(e){return!t.has(e.id)&&t.add(e.id)}))}(),Object(G.a)(Object(G.a)({},e.newsList),{},{filteredNews:o});case"RESET_FILTER":return Object(G.a)(Object(G.a)({},e.newsList),{},{filteredNews:null,news:e.newsList.news.sort((function(e,t){return e.id-t.id}))});case"CHANGE_ITEM":return Object(G.a)(Object(G.a)({},e.newsList),{},{changedItem:r});case"TITLE_CHANGE":return Object(G.a)(Object(G.a)({},e.newsList),{},{changedItem:Object(G.a)(Object(G.a)({},e.newsList.changedItem),{},{title:r})});case"BODY_CHANGE":return Object(G.a)(Object(G.a)({},e.newsList),{},{changedItem:Object(G.a)(Object(G.a)({},e.newsList.changedItem),{},{body:r})});case"SAVE_CHANGE":var d=e.newsList.news.findIndex((function(e){return e.id===r.id}));return Object(G.a)(Object(G.a)({},e.newsList),{},{filteredNews:null,news:[].concat(Object(v.a)(e.newsList.news.slice(0,d)),[r],Object(v.a)(e.newsList.news.slice(d+1)))});default:return e.newsList}},we=function(e,t){return{newsList:me(e,t)}},xe=Object(pe.a)(we);xe.subscribe((function(){localStorage["news-store"]=JSON.stringify(xe.getState())}));var ge=xe,ye=new function e(){var t=this;Object(se.a)(this,e),this._apiBase=" https://jsonplaceholder.typicode.com",this.getResource=function(){var e=Object(Oe.a)(fe.a.mark((function e(n){var r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(n));case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("Could not fetch ".concat(n)+", received ".concat(r.status));case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getNews=Object(Oe.a)(fe.a.mark((function e(){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/posts/");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),this.getNewsById=function(){var e=Object(Oe.a)(fe.a.mark((function e(n){var r;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/posts/".concat(n));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getUsers=Object(Oe.a)(fe.a.mark((function e(){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/users/");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),this.getComments=Object(Oe.a)(fe.a.mark((function e(){var n;return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getResource("/comments/");case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))};c.a.render(Object(f.jsx)(a.a,{store:ge,children:Object(f.jsx)(de,{children:Object(f.jsx)(F,{value:ye,children:Object(f.jsx)(je.a,{children:Object(f.jsx)(ae,{})})})})}),document.getElementById("root"))}},[[91,1,2]]]);
//# sourceMappingURL=main.60ea1f39.chunk.js.map